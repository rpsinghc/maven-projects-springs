<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap
  PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
        "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="LBRHeaderVO">


	<resultMap id="result" class="com.worldcheck.juno.vo.master.LBRHeaderVO">
		<result property="lbrHeader" column="LBR_HEADER" />
		<result property="id" column="LBR_INFO_ID" />
		<result property="nonAvailabilityComment" column="NON_AVAILABILITY_COMMENTS" />

		<result property="lbrOrder" column="LBR_ORDER" />
	</resultMap>

	<!-- List in LBR main Page -->
	<select id="list" resultMap="result">
		select * from RG_LBR_INFO_MASTER order by LBR_ORDER
	</select>

	<insert id="insert" parameterClass="com.worldcheck.juno.vo.master.LBRHeaderVO">

		insert into
		RG_LBR_INFO_MASTER (

		LBR_INFO_ID,
		LBR_HEADER,
		NON_AVAILABILITY_COMMENTS,

		LBR_ORDER,
		UPDATED_BY,UPDATED_ON
		)values (
		RG_LBR_INFO_MASTER_SEQ.NEXTVAL,
		#lbrHeader#,#nonAvailabilityComment#,#lbrOrder#,
		#userName#,sysdate
		)
	</insert>

	<!-- Checking if lbrheader is already present-->
	<select id="checkIfexist" parameterClass="java.lang.String"
		resultClass="int">

		SELECT count(*)
		FROM RG_LBR_INFO_MASTER
		WHERE
		upper(LBR_HEADER) like
		upper(#lbrHeader#)
	</select>

	<select id="getLBRHeaderList" resultMap="result">
		select * from
		RG_LBR_INFO_MASTER order by LBR_ORDER
	</select>
	
	<update id="update" parameterClass="com.worldcheck.juno.vo.master.LBRHeaderVO">

		update RG_LBR_INFO_MASTER set
		LBR_HEADER =#lbrHeader#,
		NON_AVAILABILITY_COMMENTS =#nonAvailabilityComment#,
		LBR_ORDER =#lbrOrder#,
		UPDATED_BY=#userName#,
		UPDATED_ON =sysdate
		where
		LBR_INFO_ID = #id#
	  </update>
	
	<delete id="deleteIds" >
		delete FROM RG_LBR_INFO_MASTER WHERE
		LBR_INFO_ID in
		<iterate property="ids" open="(" close=")" conjunction=",">
			#ids[]#
	    </iterate>
	</delete>
	
	<select id="checkLBRHeader" parameterClass="java.lang.String" resultClass="int">
		select count(*) from RG_LBR_DATA_MASTER where LBR_INFO_ID in ($records$)
	
	</select>
</sqlMap>