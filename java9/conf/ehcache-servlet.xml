<?xml version="1.0" encoding="UTF-8"?> 
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>
	<!-- <bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <value>classpath:atlas.properties</value>
        </property>
    </bean>  --> 
    
    <bean id="atlasDS" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName" value="${atlas.app.jndiname}" />
    </bean> 
	
	
	<bean id="sqlMapCacheClient" class="org.springframework.orm.ibatis.SqlMapClientFactoryBean">
		<property name="configLocation">
			<value>classpath:sqlMapConfig_cache.xml</value>
		</property>
		<property name="dataSource" ref="atlasDS" />
	</bean>
	
	<bean id="transactionManager"
        class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource">
            <ref local="atlasDS" />
        </property>
    </bean>  
      
	<bean id="cacheDb" class="com.worldcheck.atlas.cache.dao.CacheDb" > 
	 <property name="sqlMapClient" ref="sqlMapCacheClient"/>
	</bean>	


	
	<bean id="ehCacheProvider" class="com.worldcheck.atlas.cache.bl.EhCacheProvider" > 
	<property name = "cacheDb" ref= "cacheDb"/>
	<property name = "cache"  ref = "methodCache"/>
	</bean>	
	
	<bean id="cacheService" class="com.worldcheck.atlas.cache.service.CacheService" > 
 		<property name = "ehCacheProvider" ref  = "ehCacheProvider"/> 
 	</bean>
 	
 	 <bean id="jsonCacheUtilController" class="com.worldcheck.atlas.bl.cacheUtil.JSONEhCacheUtilController" >
  		
  		<property name = "cacheService" ref  = "cacheService"/>
 	</bean>
 	
	<!-- ==============================   CACHE   ============================= -->

<bean id="cacheManager" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean">
  <property name="configLocation">
    <value>classpath:ehcache.xml</value>
  </property>
</bean>

<bean id="methodCache" class="org.springframework.cache.ehcache.EhCacheFactoryBean">
  <property name = "cacheManager" ref  = "cacheManager"/>
 
  <property name="cacheName">
    <value>com.worldcheck.atlas.cache.cacheName.METHOD_CACHE</value>
  </property>
</bean>
 
<!--  =========================== End of Cache Configuration=======================  -->


</beans>