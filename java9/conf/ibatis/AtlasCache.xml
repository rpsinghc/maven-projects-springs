<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap 
PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="AtlasCache">
<!--- Showing data by ID -->
 <!-- <resultMap id="result" class="com.worldcheck.atlas.vo.ResultSetVO">
    <result property="sqlId" column="id"/>
    <result property="sqlName" column="name"/>
    
</resultMap> --> 

<!--<resultMap id="resultUserMasterVO" class="com.worldcheck.atlas.vo.masters.UserMasterVO">
    <result property="userID" column="USER_MASTER_ID"/>
    <result property="username" column="USER_NAME"/>
</resultMap>-->
<resultMap id="resultClientMasterVO" class="com.worldcheck.atlas.vo.masters.ClientMasterVO">
	<result property="clientMasterId" column="CLIENT_MASTER_ID"/>
    <result property="clientCode" column="CLIENT_CODE"/>
    <result property="clientName" column="CLIENT_NAME"/>
    <result property="codeName" column="codeName"/>
	 <result property="isSubreportRequired" column="IS_SUBJ_LEVEL_SUBRPT_REQ"/>
</resultMap>
<resultMap id="resultVendorMasterVO" class="com.worldcheck.atlas.vo.masters.VendorMasterVO">
    <result property="vendorCode" column="VENDOR_CODE"/>
    <result property="vendorName" column="VENDOR_NAME"/>
    <result property="vendorMasterId" column="VENDOR_MASTER_ID"/>
    
</resultMap>
<resultMap id="resultCountryMasterVO" class="com.worldcheck.atlas.vo.masters.CountryMasterVO">
    <result property="countryCode" column="CODE"/>
    <result property="country" column="COUNTRY"/>
    <result property="countryMasterId" column="COUNTRY_MASTER_ID"/>
	<result property="englishCountry" column="IS_ENG_COUNTRY"/>
    
</resultMap>
<resultMap id="resultIndustryMasterVO" class="com.worldcheck.atlas.vo.masters.IndustryMasterVO">
    <result property="industryCode" column="INDUSTRY_CODE"/>
    <result property="industry" column="INDUSTRY"/>
</resultMap>
<resultMap id="resultRisksMasterVO" class="com.worldcheck.atlas.vo.masters.RisksMasterVO">
    <result property="riskcode" column="RISK_CODE"/>
    <result property="risks" column="RISK"/>
</resultMap>
<resultMap id="resultCurrencyMasterVO" class="com.worldcheck.atlas.vo.masters.CurrencyMasterVO">
    <result property="currencyCode" column="CURRENCY_CODE"/>
    <result property="currency" column="CURRENCY"/>
</resultMap>
<resultMap id="resultReportTypeMasterVO" class="com.worldcheck.atlas.vo.masters.ReportTypeMasterVO">
    <result property="reportTypeCode" column="REPORT_CODE"/>
    <result property="reportType" column="REPORT_TYPE"/>
    <result property="initialsUseCRN" column="REPORT_CRN_INITIAL"/> 
    <result property="reportTypeId" column="REPORT_TYPE_MASTER_ID"/> 
       
</resultMap>
<resultMap id="resultLeaveTypeMasterVO" class="com.worldcheck.atlas.vo.masters.LeaveTypeMasterVO">
    <result property="leaveTypeMasterId" column="LEAVE_TYPE_MASTER_ID"/>
    <result property="description" column="DESCRIPTION"/>
    
</resultMap>
<resultMap id="resultBranchOfficeMasterVO" class="com.worldcheck.atlas.vo.masters.BranchOfficeMasterVO">
    <result property="branchOfficeCode" column="OFFICE_CODE"/>
    <result property="branchOffice" column="OFFICE"/>
    <result property="branchOfficeId" column="OFFICE_MASTER_ID"/>
    
    
</resultMap>

<resultMap id="resultClientGroupMasterVO" class="com.worldcheck.atlas.vo.masters.ClientGroupMasterVO">
    <result property="clientGroupId" column="CLIENT_GROUP_MASTER_ID"/>
    <result property="clientGroupName" column="CLIENT_GROUP_MASTER_NAME"/>
    <result property="statusval" column="STATUS"/>  
</resultMap>

<resultMap id="resultRisksLevel" class="com.worldcheck.atlas.vo.masters.CountryMasterVO">
    <result property="riskLevelId" column="RISK_LEVEL_ID"/>
    <result property="riskLevel" column="NAME"/>
 </resultMap>
  
  <resultMap id="resultRegion" class="com.worldcheck.atlas.vo.masters.CountryMasterVO">
    <result property="regionId" column="REGION_MASTER_ID"/>
    <result property="region" column="REGION"/>
  </resultMap>
<!--
<select id="USER_MASTER" resultMap="resultUserMasterVO">
         SELECT USER_MASTER_ID,USER_NAME FROM CMS_USER_MASTER WHERE STATUS = 1 order by USER_MASTER_ID
</select>-->

<select id="CLIENT_MASTER" resultMap="resultClientMasterVO">
          SELECT CLIENT_MASTER_ID,CLIENT_CODE,CLIENT_NAME,CLIENT_CODE||'-'||CLIENT_NAME codeName, NVL(IS_SUBJ_LEVEL_SUBRPT_REQ,0) IS_SUBJ_LEVEL_SUBRPT_REQ FROM CMS_CLIENT_MASTER WHERE STATUS = 1 order by UPPER(CLIENT_CODE)
</select>

<select id="VENDOR_MASTER" resultMap="resultVendorMasterVO">
        SELECT VENDOR_CODE,VENDOR_NAME,VENDOR_MASTER_ID FROM CMS_VENDOR_MASTER WHERE STATUS = 1 order by UPPER(VENDOR_CODE)
</select>
<select id="COUNTRY_MASTER" resultMap="resultCountryMasterVO">
         SELECT CODE,COUNTRY,COUNTRY_MASTER_ID,IS_ENG_COUNTRY FROM CMS_COUNTRY_MASTER WHERE STATUS = 1 order by UPPER(COUNTRY)
</select>
<select id="INDUSTRY_MASTER" resultMap="resultIndustryMasterVO">
         SELECT INDUSTRY_CODE,INDUSTRY FROM CMS_INDUSTRY_MASTER WHERE STATUS = 1 order by UPPER(INDUSTRY)
</select>
<select id="RISK_MASTER" resultMap="resultRisksMasterVO">
          SELECT RISK_CODE,RISK FROM CMS_RISK_MASTER WHERE STATUS = 1 order by UPPER(RISK)
</select>
<select id="CURRENCY_MASTER" resultMap="resultCurrencyMasterVO">
         select distinct(ccm.currency_code) , ccm.currency  from cms_currency_master ccm join  cms_currencyrate_master ccrm 
			on ccm.currency_code = ccrm.currency_code and ccm.status = 1 order by upper(ccm.currency)
</select>

<select id="REPORT_TYPE_MASTER" resultMap="resultReportTypeMasterVO">
          SELECT DISTINCT REPORT_TYPE,REPORT_TYPE_MASTER_ID,REPORT_CODE,REPORT_CRN_INITIAL FROM CMS_REPORT_TYPE_MASTER WHERE STATUS = 1 order by REPORT_TYPE_MASTER_ID
</select>

<!-- Start: Added for BI-293 by 6027780 -->
<select id="REPORT_TYPE_MASTER_ONLY_WITH_SRPT" resultMap="resultReportTypeMasterVO">
          SELECT DISTINCT REPORT_TYPE,REPORT_TYPE_MASTER_ID,REPORT_CODE,REPORT_CRN_INITIAL from CMS_REPORT_TYPE_MASTER R 
			WHERE R.STATUS = 1 AND  R.report_type_master_id in (Select DISTINCT sr.report_type_id from cms_subreport_type_master sr  where sr.status = 1) order by R.REPORT_TYPE_MASTER_ID
</select>
<!-- End: Added for BI-293 by 6027780 -->

<!-- Start: Added for BI-293 by 6032662 -->
<select id="REPORT_TYPE_MASTER_ALL" resultMap="resultReportTypeMasterVO">
          SELECT DISTINCT REPORT_TYPE,REPORT_TYPE_MASTER_ID,REPORT_CODE,REPORT_CRN_INITIAL FROM CMS_REPORT_TYPE_MASTER order by REPORT_TYPE_MASTER_ID
</select>
<!-- End: Added for BI-293 by 6032662 -->

<select id="LEAVE_TYPE_MASTER" resultMap="resultLeaveTypeMasterVO">
          SELECT LEAVE_TYPE_MASTER_ID,DESCRIPTION FROM CMS_LEAVE_TYPE_MASTER order by LEAVE_TYPE_MASTER_ID
</select>
<select id="OFFICE_MASTER" resultMap="resultBranchOfficeMasterVO">
          SELECT OFFICE_MASTER_ID,OFFICE_CODE,OFFICE FROM CMS_OFFICE_MASTER WHERE STATUS = 1 order by UPPER(OFFICE)
</select>

<select id="CLIENT_GROUP_MASTER" resultMap="resultClientGroupMasterVO">
          SELECT CLIENT_GROUP_MASTER_ID,CLIENT_GROUP_MASTER_NAME,STATUS FROM CMS_CLIENT_GROUP_MASTER WHERE STATUS = 1  and CLIENT_GROUP_MASTER_ID !=0 order by UPPER(CLIENT_GROUP_MASTER_NAME)
</select>

<select id="RE_MASTER" resultClass="com.worldcheck.atlas.vo.masters.REMasterVO">
          SELECT RE_MASTER_ID rEMasterId,
		        NAME name,
				IS_INDIVIDUAL isIndividual,
				ENTITY_TYPE_ID entityTypeId,
				JLPOINTS jLPoints,
				STATUS status
			FROM CMS_RE_MASTER 
			WHERE STATUS = 1
</select>

<select id="RE_MASTER_INDIVIDUAL" resultClass="com.worldcheck.atlas.vo.masters.REMasterVO">
          SELECT RE_MASTER_ID rEMasterId,
				IS_INDIVIDUAL isIndividual,
				GROUP_ID groupId,
				NAME name,
				ENTITY_TYPE_ID entityTypeId,
				JLPOINTS jLPoints,
				STATUS status,
				ST_OR_VT stOrVt,
				BI_TEAM biTeam,
				REMOVE_ENGLISH removeEnglish,
				UPDATED_BY updatedBy,
				UPDATED_ON updatedOn
			FROM CMS_RE_MASTER 
			WHERE ENTITY_TYPE_ID = 1
</select>
<select id="RE_MASTER_COMPANY" resultClass="com.worldcheck.atlas.vo.masters.REMasterVO">
     		SELECT RE_MASTER_ID rEMasterId,
				IS_INDIVIDUAL isIndividual,
				GROUP_ID groupId,
				NAME name,
				ENTITY_TYPE_ID entityTypeId,
				JLPOINTS jLPoints,
				STATUS status,
				ST_OR_VT stOrVt, 
				BI_TEAM biTeam,
				REMOVE_ENGLISH removeEnglish,
				UPDATED_BY updatedBy,
				UPDATED_ON updatedOn
			FROM CMS_RE_MASTER 
			WHERE ENTITY_TYPE_ID = 2
</select>
<select id = "SUBREPORT_TYPE_MASTER" resultClass="com.worldcheck.atlas.vo.report.SubReportTypeVO" >
SELECT SUBREPORT_TYPE_MASTER_ID subReportId, 
		SUB_REPORT subReportName
FROM CMS_SUBREPORT_TYPE_MASTER 
WHERE STATUS = 1

</select>

<select id = "SCORESHEET_FLDS_MASTER" resultClass="com.worldcheck.atlas.vo.masters.ScoreSheetMasterVO" >
SELECT SCORESHEET_FLDS_MASTER_ID scoresheetfieldId, 
		FIELD_NAME fieldName
FROM CMS_SCORESHEET_FLDS_MASTER 


</select>

<select id = "CASE_STATUS_MASTER" resultClass="com.worldcheck.atlas.vo.report.CTExcelVO" >
SELECT
CASE_STATUS_ID caseStatusId,
 DESCRIPTION caseStatus 
FROM 
CMS_CASE_STATUS_MASTER

</select>

<select id ="CNTRY_DB_CATEG_MASTER" resultClass ="com.worldcheck.atlas.vo.masters.CountryDBCommonVO">
SELECT CNTRY_DB_CATEG_ID id ,NAME name FROM CMS_CNTRY_DB_CATEG_MASTER
</select>

<select id ="CNTRY_DB_LBR_MASTER" resultClass ="com.worldcheck.atlas.vo.masters.CountryDBCommonVO">
SELECT CNTRY_DB_LBR_ID id ,NAME name FROM CMS_CNTRY_DB_LBR_MASTER
</select>

<select id ="CNTRY_DB_TYPE_MASTER" resultClass ="com.worldcheck.atlas.vo.masters.CountryDBCommonVO">
SELECT CNTRY_DB_TYPE_ID id ,NAME name FROM CMS_CNTRY_DB_TYPE_MASTER
</select>

 <select id="RISK_LEVEL" resultMap="resultRisksLevel">
          SELECT DISTINCT RISK_LEVEL_ID,NAME FROM CMS_RISK_LEVEL WHERE STATUS = 1 order by UPPER(NAME)
 </select>
 
 
 <select id="REGION" resultMap="resultRegion">
          SELECT DISTINCT REGION_MASTER_ID,REGION FROM CMS_REGION_MASTER WHERE STATUS = 1 order by UPPER(REGION)
 </select>
 <select id="getUnconfirmedBudgetDetailsCount" resultClass="java.lang.Integer">
		select count(ca.CRN)
		from CMS_CLIENTCASE ccc, CMS_ACCOUNTS ca, CMS_CURRENCY_MASTER ccm
		where ca.ISBUDGETDUEDATECONFIRMED = 0 and ca.CRN = ccc.CRN and
		ccm.CURRENCY_CODE = ca.CURRENCY_CODE and ccc.IS_ISIS=1 and ccc.CASE_STATUS_ID in (2,3) 
	</select>

</sqlMap>
